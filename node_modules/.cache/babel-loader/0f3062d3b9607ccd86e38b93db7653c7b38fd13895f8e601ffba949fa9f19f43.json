{"ast":null,"code":"import \"core-js/modules/es.object.keys.js\";\n// 复用安全获取当前用户信息方法\nfunction getCurrentUser() {\n  try {\n    if (typeof window !== \"undefined\") {\n      var w = eval(\"window\");\n      if (w && w.localStorage) {\n        var userStr = w.localStorage.getItem(\"user\");\n        if (userStr) return JSON.parse(userStr);\n      }\n    }\n  } catch (e) {\n    // ignore\n  }\n  return null;\n}\nexport default {\n  name: \"Sidebar\",\n  props: {\n    activeMenu: {\n      type: String,\n      \"default\": \"/user-management\"\n    }\n  },\n  computed: {\n    menuItems: function menuItems() {\n      var user = getCurrentUser();\n      if (user && user.role === 2) {\n        // 读者\n        return [{\n          index: \"/dashboard\",\n          label: \"数据可视化\"\n        }, {\n          index: \"/profile\",\n          label: \"个人信息\"\n        }, {\n          index: \"/book-management\",\n          label: \"图书管理\"\n        }, {\n          index: \"/borrow-management\",\n          label: \"借阅管理\"\n        }, {\n          index: \"/system-config-management\",\n          label: \"系统管理\"\n        }];\n      }\n      // 管理员或未登录\n      return [{\n        index: \"/dashboard\",\n        label: \"数据可视化\"\n      }, {\n        index: \"/user-management\",\n        label: \"用户管理\"\n      }, {\n        index: \"/book-management\",\n        label: \"图书管理\"\n      }, {\n        index: \"/borrow-management\",\n        label: \"借阅管理\"\n      }, {\n        index: \"/system-config-management\",\n        label: \"系统管理\"\n      }];\n    }\n  }\n};","map":{"version":3,"names":["getCurrentUser","window","w","eval","localStorage","userStr","getItem","JSON","parse","e","name","props","activeMenu","type","String","computed","menuItems","user","role","index","label"],"sources":["src/components/Sidebar.vue"],"sourcesContent":["<template>\r\n  <el-menu :default-active=\"activeMenu\" class=\"sidebar-menu\" router>\r\n    <el-submenu index=\"1\">\r\n      <template #title>\r\n        <i class=\"el-icon-setting\" />\r\n        <span>系统管理</span>\r\n      </template>\r\n      <el-menu-item\r\n        v-for=\"item in menuItems\"\r\n        :key=\"item.index\"\r\n        :index=\"item.index\"\r\n      >\r\n        {{ item.label }}\r\n      </el-menu-item>\r\n    </el-submenu>\r\n  </el-menu>\r\n</template>\r\n\r\n<script>\r\n// 复用安全获取当前用户信息方法\r\nfunction getCurrentUser() {\r\n  try {\r\n    if (typeof window !== \"undefined\") {\r\n      const w = eval(\"window\");\r\n      if (w && w.localStorage) {\r\n        const userStr = w.localStorage.getItem(\"user\");\r\n        if (userStr) return JSON.parse(userStr);\r\n      }\r\n    }\r\n  } catch (e) {\r\n    // ignore\r\n  }\r\n  return null;\r\n}\r\n\r\nexport default {\r\n  name: \"Sidebar\",\r\n  props: {\r\n    activeMenu: {\r\n      type: String,\r\n      default: \"/user-management\",\r\n    },\r\n  },\r\n  computed: {\r\n    menuItems() {\r\n      const user = getCurrentUser();\r\n      if (user && user.role === 2) {\r\n        // 读者\r\n        return [\r\n          { index: \"/dashboard\", label: \"数据可视化\" },\r\n          { index: \"/profile\", label: \"个人信息\" },\r\n          { index: \"/book-management\", label: \"图书管理\" },\r\n          { index: \"/borrow-management\", label: \"借阅管理\" },\r\n          { index: \"/system-config-management\", label: \"系统管理\" },\r\n        ];\r\n      }\r\n      // 管理员或未登录\r\n      return [\r\n        { index: \"/dashboard\", label: \"数据可视化\" },\r\n        { index: \"/user-management\", label: \"用户管理\" },\r\n        { index: \"/book-management\", label: \"图书管理\" },\r\n        { index: \"/borrow-management\", label: \"借阅管理\" },\r\n        { index: \"/system-config-management\", label: \"系统管理\" },\r\n      ];\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.sidebar-menu {\r\n  width: 220px;\r\n  min-height: 100vh;\r\n  border-right: 1px solid #e6e6e6;\r\n  background: #fff;\r\n}\r\n</style>\r\n"],"mappings":";AAmBA;AACA,SAAAA,eAAA;EACA;IACA,WAAAC,MAAA;MACA,IAAAC,CAAA,GAAAC,IAAA;MACA,IAAAD,CAAA,IAAAA,CAAA,CAAAE,YAAA;QACA,IAAAC,OAAA,GAAAH,CAAA,CAAAE,YAAA,CAAAE,OAAA;QACA,IAAAD,OAAA,SAAAE,IAAA,CAAAC,KAAA,CAAAH,OAAA;MACA;IACA;EACA,SAAAI,CAAA;IACA;EAAA;EAEA;AACA;AAEA;EACAC,IAAA;EACAC,KAAA;IACAC,UAAA;MACAC,IAAA,EAAAC,MAAA;MACA;IACA;EACA;EACAC,QAAA;IACAC,SAAA,WAAAA,UAAA;MACA,IAAAC,IAAA,GAAAjB,cAAA;MACA,IAAAiB,IAAA,IAAAA,IAAA,CAAAC,IAAA;QACA;QACA,QACA;UAAAC,KAAA;UAAAC,KAAA;QAAA,GACA;UAAAD,KAAA;UAAAC,KAAA;QAAA,GACA;UAAAD,KAAA;UAAAC,KAAA;QAAA,GACA;UAAAD,KAAA;UAAAC,KAAA;QAAA,GACA;UAAAD,KAAA;UAAAC,KAAA;QAAA,EACA;MACA;MACA;MACA,QACA;QAAAD,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA,EACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}