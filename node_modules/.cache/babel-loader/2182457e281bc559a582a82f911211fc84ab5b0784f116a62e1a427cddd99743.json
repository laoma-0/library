{"ast":null,"code":"import \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport Sidebar from \"@/components/Sidebar.vue\";\nimport Breadcrumb from \"@/components/Breadcrumb.vue\";\nfunction getCurrentUser() {\n  try {\n    if (typeof window !== \"undefined\") {\n      var w = eval(\"window\");\n      if (w && w.localStorage) {\n        var userStr = w.localStorage.getItem(\"user\");\n        window.console.log(\"User data from localStorage:\", userStr); // 修复 console 未定义\n        if (userStr) return JSON.parse(userStr);\n      }\n    }\n  } catch (e) {\n    window.console.error(\"Error parsing user data:\", e); // 修复 console 未定义\n  }\n  return {};\n}\nexport default {\n  name: \"Profile\",\n  components: {\n    Sidebar: Sidebar,\n    Breadcrumb: Breadcrumb\n  },\n  data: function data() {\n    return {\n      user: getCurrentUser()\n    };\n  },\n  mounted: function mounted() {\n    // 未登录则跳转到登录页\n    if (!this.user || !this.user.username) {\n      this.$router.replace({\n        path: \"/login\"\n      });\n    }\n  }\n};","map":{"version":3,"names":["Sidebar","Breadcrumb","getCurrentUser","window","w","eval","localStorage","userStr","getItem","console","log","JSON","parse","e","error","name","components","data","user","mounted","username","$router","replace","path"],"sources":["src/views/Profile.vue"],"sourcesContent":["<template>\r\n  <div class=\"profile-layout\">\r\n    <Sidebar class=\"sidebar\" :active-menu=\"'/profile'\" />\r\n    <div class=\"main-content\">\r\n      <Breadcrumb :items=\"[{ text: '个人信息' }]\" />\r\n      <div class=\"content-area\">\r\n        <el-card>\r\n          <h2>个人信息</h2>\r\n          <pre>{{ user }}</pre>\r\n          <!-- 添加调试信息 -->\r\n          <el-descriptions :column=\"1\" border>\r\n            <el-descriptions-item label=\"用户名\">\r\n              {{ user.username }}\r\n            </el-descriptions-item>\r\n            <el-descriptions-item label=\"姓名\">\r\n              {{ user.realName || \"-\" }}\r\n            </el-descriptions-item>\r\n            <el-descriptions-item label=\"角色\">\r\n              {{ user.role === 1 ? \"管理员\" : \"读者\" }}\r\n            </el-descriptions-item>\r\n            <el-descriptions-item label=\"邮箱\">\r\n              {{ user.email || \"-\" }}\r\n            </el-descriptions-item>\r\n            <el-descriptions-item label=\"注册时间\">\r\n              {{ user.createTime || \"-\" }}\r\n            </el-descriptions-item>\r\n          </el-descriptions>\r\n        </el-card>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Sidebar from \"@/components/Sidebar.vue\";\r\nimport Breadcrumb from \"@/components/Breadcrumb.vue\";\r\n\r\nfunction getCurrentUser() {\r\n  try {\r\n    if (typeof window !== \"undefined\") {\r\n      const w = eval(\"window\");\r\n      if (w && w.localStorage) {\r\n        const userStr = w.localStorage.getItem(\"user\");\r\n        window.console.log(\"User data from localStorage:\", userStr); // 修复 console 未定义\r\n        if (userStr) return JSON.parse(userStr);\r\n      }\r\n    }\r\n  } catch (e) {\r\n    window.console.error(\"Error parsing user data:\", e); // 修复 console 未定义\r\n  }\r\n  return {};\r\n}\r\n\r\nexport default {\r\n  name: \"Profile\",\r\n  components: { Sidebar, Breadcrumb },\r\n  data() {\r\n    return {\r\n      user: getCurrentUser(),\r\n    };\r\n  },\r\n  mounted() {\r\n    // 未登录则跳转到登录页\r\n    if (!this.user || !this.user.username) {\r\n      this.$router.replace({ path: \"/login\" });\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.profile-layout {\r\n  display: flex;\r\n  min-height: 100vh;\r\n  background: #f5f7fa;\r\n}\r\n.sidebar {\r\n  width: 220px;\r\n  background: #fff;\r\n  border-right: 1px solid #e6e6e6;\r\n}\r\n.main-content {\r\n  flex: 1;\r\n  padding: 24px;\r\n}\r\n.content-area {\r\n  background: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.04);\r\n  padding: 24px;\r\n}\r\n</style>\r\n"],"mappings":";;;AAkCA,OAAAA,OAAA;AACA,OAAAC,UAAA;AAEA,SAAAC,eAAA;EACA;IACA,WAAAC,MAAA;MACA,IAAAC,CAAA,GAAAC,IAAA;MACA,IAAAD,CAAA,IAAAA,CAAA,CAAAE,YAAA;QACA,IAAAC,OAAA,GAAAH,CAAA,CAAAE,YAAA,CAAAE,OAAA;QACAL,MAAA,CAAAM,OAAA,CAAAC,GAAA,iCAAAH,OAAA;QACA,IAAAA,OAAA,SAAAI,IAAA,CAAAC,KAAA,CAAAL,OAAA;MACA;IACA;EACA,SAAAM,CAAA;IACAV,MAAA,CAAAM,OAAA,CAAAK,KAAA,6BAAAD,CAAA;EACA;EACA;AACA;AAEA;EACAE,IAAA;EACAC,UAAA;IAAAhB,OAAA,EAAAA,OAAA;IAAAC,UAAA,EAAAA;EAAA;EACAgB,IAAA,WAAAA,KAAA;IACA;MACAC,IAAA,EAAAhB,cAAA;IACA;EACA;EACAiB,OAAA,WAAAA,QAAA;IACA;IACA,UAAAD,IAAA,UAAAA,IAAA,CAAAE,QAAA;MACA,KAAAC,OAAA,CAAAC,OAAA;QAAAC,IAAA;MAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}