{"ast":null,"code":"import \"core-js/modules/es.array.is-array.js\";\nexport default {\n  name: \"BorrowSearch\",\n  emits: [\"search\", \"reset\"],\n  data: function data() {\n    return {\n      searchForm: {\n        userId: \"\",\n        bookId: \"\",\n        status: \"\"\n      },\n      userOptions: [],\n      bookOptions: []\n    };\n  },\n  mounted: function mounted() {\n    this.fetchUsers();\n    this.fetchBooks();\n  },\n  methods: {\n    fetchUsers: function fetchUsers() {\n      var _this = this;\n      this.$axios && this.$axios.get(\"/api/users\").then(function (res) {\n        _this.userOptions = Array.isArray(res.data) ? res.data : res.data.data || [];\n      });\n    },\n    fetchBooks: function fetchBooks() {\n      var _this2 = this;\n      this.$axios && this.$axios.get(\"/api/books\").then(function (res) {\n        _this2.bookOptions = res.data || [];\n      });\n    },\n    search: function search() {\n      // 只传递有值的参数\n      var params = {};\n      if (this.searchForm.userId) params.userId = this.searchForm.userId;\n      if (this.searchForm.bookId) params.bookId = this.searchForm.bookId;\n      if (this.searchForm.status !== \"\") params.status = this.searchForm.status;\n      this.$emit(\"search\", params);\n    },\n    reset: function reset() {\n      this.searchForm.userId = \"\";\n      this.searchForm.bookId = \"\";\n      this.searchForm.status = \"\";\n      this.$emit(\"reset\");\n    }\n  }\n};","map":{"version":3,"names":["name","emits","data","searchForm","userId","bookId","status","userOptions","bookOptions","mounted","fetchUsers","fetchBooks","methods","_this","$axios","get","then","res","Array","isArray","_this2","search","params","$emit","reset"],"sources":["src/components/BorrowSearch.vue"],"sourcesContent":["<template>\r\n  <div class=\"borrow-search\">\r\n    <el-form :inline=\"true\" :model=\"searchForm\">\r\n      <el-form-item label=\"借阅人\">\r\n        <el-select\r\n          v-model=\"searchForm.userId\"\r\n          placeholder=\"请选择借阅人\"\r\n          filterable\r\n          clearable\r\n        >\r\n          <el-option\r\n            v-for=\"user in userOptions\"\r\n            :key=\"user.id\"\r\n            :label=\"user.realName || user.username\"\r\n            :value=\"user.id\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"图书名称\">\r\n        <el-select\r\n          v-model=\"searchForm.bookId\"\r\n          placeholder=\"请选择图书\"\r\n          filterable\r\n          clearable\r\n        >\r\n          <el-option\r\n            v-for=\"book in bookOptions\"\r\n            :key=\"book.id\"\r\n            :label=\"book.title\"\r\n            :value=\"book.id\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"状态\">\r\n        <el-select v-model=\"searchForm.status\" clearable placeholder=\"全部\">\r\n          <el-option label=\"可借阅\" :value=\"0\" />\r\n          <el-option label=\"已归还\" :value=\"1\" />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"search\">搜索</el-button>\r\n        <el-button @click=\"reset\"> 重置 </el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"BorrowSearch\",\r\n  emits: [\"search\", \"reset\"],\r\n  data() {\r\n    return {\r\n      searchForm: {\r\n        userId: \"\",\r\n        bookId: \"\",\r\n        status: \"\",\r\n      },\r\n      userOptions: [],\r\n      bookOptions: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    this.fetchUsers();\r\n    this.fetchBooks();\r\n  },\r\n  methods: {\r\n    fetchUsers() {\r\n      this.$axios &&\r\n        this.$axios.get(\"/api/users\").then((res) => {\r\n          this.userOptions = Array.isArray(res.data)\r\n            ? res.data\r\n            : res.data.data || [];\r\n        });\r\n    },\r\n    fetchBooks() {\r\n      this.$axios &&\r\n        this.$axios.get(\"/api/books\").then((res) => {\r\n          this.bookOptions = res.data || [];\r\n        });\r\n    },\r\n    search() {\r\n      // 只传递有值的参数\r\n      const params = {};\r\n      if (this.searchForm.userId) params.userId = this.searchForm.userId;\r\n      if (this.searchForm.bookId) params.bookId = this.searchForm.bookId;\r\n      if (this.searchForm.status !== \"\") params.status = this.searchForm.status;\r\n      this.$emit(\"search\", params);\r\n    },\r\n    reset() {\r\n      this.searchForm.userId = \"\";\r\n      this.searchForm.bookId = \"\";\r\n      this.searchForm.status = \"\";\r\n      this.$emit(\"reset\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.borrow-search {\r\n  margin-bottom: 16px;\r\n}\r\n</style>\r\n"],"mappings":";AAgDA;EACAA,IAAA;EACAC,KAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,UAAA;QACAC,MAAA;QACAC,MAAA;QACAC,MAAA;MACA;MACAC,WAAA;MACAC,WAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,UAAA;IACA,KAAAC,UAAA;EACA;EACAC,OAAA;IACAF,UAAA,WAAAA,WAAA;MAAA,IAAAG,KAAA;MACA,KAAAC,MAAA,IACA,KAAAA,MAAA,CAAAC,GAAA,eAAAC,IAAA,WAAAC,GAAA;QACAJ,KAAA,CAAAN,WAAA,GAAAW,KAAA,CAAAC,OAAA,CAAAF,GAAA,CAAAf,IAAA,IACAe,GAAA,CAAAf,IAAA,GACAe,GAAA,CAAAf,IAAA,CAAAA,IAAA;MACA;IACA;IACAS,UAAA,WAAAA,WAAA;MAAA,IAAAS,MAAA;MACA,KAAAN,MAAA,IACA,KAAAA,MAAA,CAAAC,GAAA,eAAAC,IAAA,WAAAC,GAAA;QACAG,MAAA,CAAAZ,WAAA,GAAAS,GAAA,CAAAf,IAAA;MACA;IACA;IACAmB,MAAA,WAAAA,OAAA;MACA;MACA,IAAAC,MAAA;MACA,SAAAnB,UAAA,CAAAC,MAAA,EAAAkB,MAAA,CAAAlB,MAAA,QAAAD,UAAA,CAAAC,MAAA;MACA,SAAAD,UAAA,CAAAE,MAAA,EAAAiB,MAAA,CAAAjB,MAAA,QAAAF,UAAA,CAAAE,MAAA;MACA,SAAAF,UAAA,CAAAG,MAAA,SAAAgB,MAAA,CAAAhB,MAAA,QAAAH,UAAA,CAAAG,MAAA;MACA,KAAAiB,KAAA,WAAAD,MAAA;IACA;IACAE,KAAA,WAAAA,MAAA;MACA,KAAArB,UAAA,CAAAC,MAAA;MACA,KAAAD,UAAA,CAAAE,MAAA;MACA,KAAAF,UAAA,CAAAG,MAAA;MACA,KAAAiB,KAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}