{"ast":null,"code":"/* global window, localStorage */\nimport Vue from \"vue\";\nimport Router from \"vue-router\";\n\n// import MainLayout from \"@/layout/MainLayout.vue\";\n// import UserManagement from \"@/views/UserManagement.vue\";\nimport Login from \"@/components/Login.vue\";\nimport UserManagement from \"@/views/UserManagement.vue\";\nimport BookManagement from \"@/views/BookManagement.vue\";\nimport BorrowManagement from \"@/views/BorrowManagement.vue\";\nimport SystemConfigManagement from \"@/views/SystemConfigManagement.vue\";\nimport Profile from \"@/views/Profile.vue\";\nimport Dashboard from \"@/views/Dashboard.vue\";\nimport Register from \"@/components/Register.vue\";\nVue.use(Router);\nvar router = new Router({\n  mode: \"history\",\n  routes: [{\n    path: \"/login\",\n    name: \"Login\",\n    component: Login,\n    meta: {\n      \"public\": true\n    }\n  }, {\n    path: \"/register\",\n    name: \"Register\",\n    component: Register,\n    meta: {\n      \"public\": true\n    }\n  }, {\n    path: \"/user-management\",\n    name: \"UserManagement\",\n    component: UserManagement,\n    meta: {\n      title: \"用户管理\",\n      roles: [\"admin\", \"manager\"]\n    }\n  }, {\n    path: \"/book-management\",\n    name: \"BookManagement\",\n    component: BookManagement,\n    meta: {\n      title: \"图书管理\",\n      roles: [\"admin\", \"manager\"]\n    }\n  }, {\n    path: \"/borrow-management\",\n    name: \"BorrowManagement\",\n    component: BorrowManagement,\n    meta: {\n      title: \"借阅管理\",\n      roles: [\"admin\", \"manager\"]\n    }\n  }, {\n    path: \"/system-config-management\",\n    name: \"SystemConfigManagement\",\n    component: SystemConfigManagement,\n    meta: {\n      title: \"系统配置\",\n      roles: [\"admin\"]\n    }\n  }, {\n    path: \"/profile\",\n    name: \"Profile\",\n    component: Profile,\n    meta: {\n      title: \"个人信息\"\n    }\n  }, {\n    path: \"/dashboard\",\n    name: \"Dashboard\",\n    component: Dashboard,\n    meta: {\n      title: \"数据可视化\",\n      roles: [\"admin\", \"manager\"]\n    }\n  }, {\n    path: \"/\",\n    redirect: \"/login\"\n  }, {\n    path: \"*\",\n    redirect: \"/login\"\n  }]\n});\n\n// 路由登录拦截\nrouter.beforeEach(function (to, from, next) {\n  // 允许未登录访问登录和注册页面\n  if (to.path === '/login' || to.path === '/register') {\n    return next();\n  }\n  // 登录校验\n  var user = null;\n  try {\n    var w = eval(\"window\");\n    if (w && w.localStorage) {\n      user = w.localStorage.getItem(\"user\");\n    }\n  } catch (e) {}\n  if (!user) {\n    // 未登录，跳转到登录页\n    return next('/login');\n  }\n  // 已登录，正常跳转\n  next();\n});\nexport default router;","map":{"version":3,"names":["Vue","Router","Login","UserManagement","BookManagement","BorrowManagement","SystemConfigManagement","Profile","Dashboard","Register","use","router","mode","routes","path","name","component","meta","title","roles","redirect","beforeEach","to","from","next","user","w","eval","localStorage","getItem","e"],"sources":["D:/图书管理系统/library/src/router/index.js"],"sourcesContent":["/* global window, localStorage */\r\nimport Vue from \"vue\";\r\nimport Router from \"vue-router\";\r\n\r\n// import MainLayout from \"@/layout/MainLayout.vue\";\r\n// import UserManagement from \"@/views/UserManagement.vue\";\r\nimport Login from \"@/components/Login.vue\";\r\nimport UserManagement from \"@/views/UserManagement.vue\";\r\nimport BookManagement from \"@/views/BookManagement.vue\";\r\nimport BorrowManagement from \"@/views/BorrowManagement.vue\";\r\nimport SystemConfigManagement from \"@/views/SystemConfigManagement.vue\";\r\nimport Profile from \"@/views/Profile.vue\";\r\nimport Dashboard from \"@/views/Dashboard.vue\";\r\nimport Register from \"@/components/Register.vue\";\r\n\r\nVue.use(Router);\r\n\r\nconst router = new Router({\r\n  mode: \"history\",\r\n  routes: [\r\n    {\r\n      path: \"/login\",\r\n      name: \"Login\",\r\n      component: Login,\r\n      meta: { public: true },\r\n    },\r\n    {\r\n      path: \"/register\",\r\n      name: \"Register\",\r\n      component: Register,\r\n      meta: { public: true },\r\n    },\r\n    {\r\n      path: \"/user-management\",\r\n      name: \"UserManagement\",\r\n      component: UserManagement,\r\n      meta: { title: \"用户管理\", roles: [\"admin\", \"manager\"] },\r\n    },\r\n    {\r\n      path: \"/book-management\",\r\n      name: \"BookManagement\",\r\n      component: BookManagement,\r\n      meta: { title: \"图书管理\", roles: [\"admin\", \"manager\"] },\r\n    },\r\n    {\r\n      path: \"/borrow-management\",\r\n      name: \"BorrowManagement\",\r\n      component: BorrowManagement,\r\n      meta: { title: \"借阅管理\", roles: [\"admin\", \"manager\"] },\r\n    },\r\n    {\r\n      path: \"/system-config-management\",\r\n      name: \"SystemConfigManagement\",\r\n      component: SystemConfigManagement,\r\n      meta: { title: \"系统配置\", roles: [\"admin\"] },\r\n    },\r\n    {\r\n      path: \"/profile\",\r\n      name: \"Profile\",\r\n      component: Profile,\r\n      meta: { title: \"个人信息\" },\r\n    },\r\n    {\r\n      path: \"/dashboard\",\r\n      name: \"Dashboard\",\r\n      component: Dashboard,\r\n      meta: { title: \"数据可视化\", roles: [\"admin\", \"manager\"] },\r\n    },\r\n    {\r\n      path: \"/\",\r\n      redirect: \"/login\",\r\n    },\r\n    {\r\n      path: \"*\",\r\n      redirect: \"/login\",\r\n    },\r\n  ],\r\n});\r\n\r\n// 路由登录拦截\r\nrouter.beforeEach((to, from, next) => {\r\n  // 允许未登录访问登录和注册页面\r\n  if (to.path === '/login' || to.path === '/register') {\r\n    return next();\r\n  }\r\n  // 登录校验\r\n  let user = null;\r\n  try {\r\n    const w = eval(\"window\");\r\n    if (w && w.localStorage) {\r\n      user = w.localStorage.getItem(\"user\");\r\n    }\r\n  } catch (e) {}\r\n  if (!user) {\r\n    // 未登录，跳转到登录页\r\n    return next('/login');\r\n  }\r\n  // 已登录，正常跳转\r\n  next();\r\n});\r\n\r\nexport default router;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}